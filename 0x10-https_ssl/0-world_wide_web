#!/bin/bash

# Function to print record info
print_record_info () {
    echo "The subdomain $1 is A $2 record and points to $3"
}

# Domain name to audit
domain="$1"

# Specific subdomain to audit (optional)
subdomain="$2"

# Default subdomains to audit
subdomains=("www" "102807-lb-01" "102807-web-01" "102807-web-02")

# If a specific subdomain is provided, only audit that subdomain
if [[ -n "$subdomain" ]]; then
    # Get record info for the specified subdomain
    record_info=$(dig +short "$subdomain.$domain" | awk '{print $1}')
    record_type=$(dig +short "$subdomain.$domain" | awk '{print $4}')
    print_record_info "$subdomain.$domain" "$record_type" "$record_info"
else
    # Audit all default subdomains
    for sub in "${subdomains[@]}"; do
        record_info=$(dig +short "$sub.$domain" | awk '{print $1}')
        record_type=$(dig +short "$sub.$domain" | awk '{print $4}')
        print_record_info "$sub.$domain" "$record_type" "$record_info"
    done
fi
